const _0x498088=_0x50c2;(function(_0x2ef9ab,_0x492ee0){const _0x4e2f70=_0x50c2,_0x20b2bc=_0x2ef9ab();while(!![]){try{const _0x55358d=parseInt(_0x4e2f70(0x122))/0x1+parseInt(_0x4e2f70(0x12a))/0x2+parseInt(_0x4e2f70(0x12e))/0x3*(parseInt(_0x4e2f70(0xfe))/0x4)+-parseInt(_0x4e2f70(0x114))/0x5*(-parseInt(_0x4e2f70(0xfa))/0x6)+-parseInt(_0x4e2f70(0x126))/0x7*(-parseInt(_0x4e2f70(0x105))/0x8)+parseInt(_0x4e2f70(0x125))/0x9*(parseInt(_0x4e2f70(0xfb))/0xa)+-parseInt(_0x4e2f70(0x137))/0xb;if(_0x55358d===_0x492ee0)break;else _0x20b2bc['push'](_0x20b2bc['shift']());}catch(_0x2e17a7){_0x20b2bc['push'](_0x20b2bc['shift']());}}}(_0x2e67,0xd44fa));import{Vector3}from'./vector';function _0x50c2(_0x280d81,_0x1756b5){const _0x2e6715=_0x2e67();return _0x50c2=function(_0x50c20d,_0x3b11ac){_0x50c20d=_0x50c20d-0xfa;let _0x4a17c5=_0x2e6715[_0x50c20d];return _0x4a17c5;},_0x50c2(_0x280d81,_0x1756b5);}import{EnchantmentType}from'@minecraft/server';import{ActionFormData,ModalFormData}from'@minecraft/server-ui';import{getTexturePath,formatItemName,see_xp,checkCompatibility}from'./function';import{enchant_tools,enchant_list,enchant_type}from'./enchant';import{config}from'../../config';export const blocks={0x1:{'Id':_0x498088(0x121),'interact_function':enchant_table_plus_interact,'place_function':enchant_table_plus_place,'break_function':enchant_table_plus_break}};async function enchant_table_plus_place(_0x3f089e,_0x2d09df){const _0x73c17e=_0x498088;let _0xcd65b6=_0x3f089e[_0x73c17e(0x11c)][_0x73c17e(0x136)](_0x73c17e(0x106),new Vector3(_0x2d09df[_0x73c17e(0x104)]['x']+0.5,_0x2d09df[_0x73c17e(0x104)]['y']+0x1,_0x2d09df[_0x73c17e(0x104)]['z']+0.5));_0xcd65b6[_0x73c17e(0x101)]='';};async function enchant_table_plus_break(_0x3bbe9e,_0x3084f9){const _0x5d5d31=_0x498088,_0x3e30e0=new Vector3(_0x3084f9['location']['x']+0.5,_0x3084f9['location']['y']+0x1,_0x3084f9['location']['z']+0.5),_0x4cc987=_0x3084f9['dimension'][_0x5d5d31(0x118)](_0x3e30e0),_0x1e541b=_0x4cc987[_0x5d5d31(0x10a)](_0x7af04=>{const _0x567f06=_0x5d5d31;return _0x7af04[_0x567f06(0x100)]===_0x567f06(0x106);});_0x1e541b&&_0x1e541b[_0x5d5d31(0x133)]('kill\x20@s');};async function enchant_table_plus_interact(_0x4e42b3){const _0x307053=_0x498088,_0x475ec4=_0x4e42b3[_0x307053(0x102)](_0x307053(0x103))[_0x307053(0x108)];if(!_0x475ec4){console[_0x307053(0x113)]('Inventory\x20for\x20player\x20not\x20found.');return;}const _0x87013e=[];for(let _0x3931a7=0x0;_0x3931a7<0x9;_0x3931a7++){const _0x47699a=_0x475ec4[_0x307053(0x12d)](_0x3931a7);if(!_0x47699a)continue;const _0x151ef1=_0x47699a[_0x307053(0x100)][_0x307053(0x120)](':')[0x1];let _0x2af35a=Object[_0x307053(0x107)](enchant_tools)[_0x307053(0x10a)](_0x5dce2d=>_0x151ef1===_0x5dce2d);!_0x2af35a&&(_0x2af35a=Object['keys'](enchant_tools)[_0x307053(0x10a)](_0x816ad3=>_0x151ef1[_0x307053(0x134)](_0x816ad3)));if(!_0x2af35a)continue;_0x87013e[_0x307053(0x109)]({'item':_0x47699a,'index':_0x3931a7,'enchantToolKey':_0x2af35a});}for(let _0x19cd60=0x9;_0x19cd60<0x24;_0x19cd60++){const _0xdd23a5=_0x475ec4[_0x307053(0x12d)](_0x19cd60);if(!_0xdd23a5)continue;const _0x38ea41=_0xdd23a5[_0x307053(0x100)][_0x307053(0x120)](':')[0x1];let _0x4f9672=Object['keys'](enchant_tools)[_0x307053(0x10a)](_0x1ddb41=>_0x38ea41===_0x1ddb41);!_0x4f9672&&(_0x4f9672=Object['keys'](enchant_tools)['find'](_0x1baafd=>_0x38ea41[_0x307053(0x134)](_0x1baafd)));if(!_0x4f9672)continue;_0x87013e[_0x307053(0x109)]({'item':_0xdd23a5,'index':_0x19cd60,'enchantToolKey':_0x4f9672});}if(_0x87013e[_0x307053(0x135)]===0x0){_0x4e42b3[_0x307053(0x11d)](_0x307053(0x111));return;}const _0x324674=new ActionFormData();_0x324674['title']('arucube.enchant.plus'),_0x324674[_0x307053(0x131)](_0x307053(0x112)+_0x87013e[_0x307053(0x135)]+'\x0a§8');for(let _0x5b0eaf=0x0;_0x5b0eaf<_0x87013e[_0x307053(0x135)];_0x5b0eaf++){const {item:_0x4840bc,index:_0x142e55,enchantToolKey:_0x3fefaa}=_0x87013e[_0x5b0eaf],_0x162342=formatItemName(_0x4840bc[_0x307053(0x101)]??_0x4840bc[_0x307053(0x100)]),_0x30de37=getTexturePath(_0x4840bc[_0x307053(0x100)]),_0x17da4b=enchant_type[_0x3fefaa]||_0x3fefaa;_0x324674['button'](_0x307053(0x117)+_0x142e55,_0x30de37);}_0x324674[_0x307053(0x116)](_0x4e42b3)[_0x307053(0x10b)](({selection:_0x2a4d8e,canceled:_0x36bfec})=>{const _0x2f46ab=_0x307053;if(_0x36bfec)return;const _0x32dded=_0x87013e[_0x2a4d8e];if(!_0x32dded)return;showItemEditor(_0x4e42b3,_0x32dded[_0x2f46ab(0xfd)],_0x32dded['enchantToolKey']);});};function toRoman(_0x92231c){const _0x400cad=_0x498088,_0x4c58c0={'M':0x3e8,'CM':0x384,'D':0x1f4,'CD':0x190,'C':0x64,'XC':0x5a,'L':0x32,'XL':0x28,'X':0xa,'IX':0x9,'V':0x5,'IV':0x4,'I':0x1};let _0x768773='';for(let _0x48e45f of Object[_0x400cad(0x107)](_0x4c58c0)){let _0x517894=Math[_0x400cad(0x129)](_0x92231c/_0x4c58c0[_0x48e45f]);_0x92231c-=_0x517894*_0x4c58c0[_0x48e45f],_0x768773+=_0x48e45f['repeat'](_0x517894);}return _0x768773;};async function showItemEditor(_0x313ae3,_0x4ab32d,_0x51de9c){const _0x4532b7=_0x498088,{container:_0x583c33}=_0x313ae3['getComponent'](_0x4532b7(0x12f)),_0x57d5ae=_0x583c33[_0x4532b7(0x12d)](_0x4ab32d),_0x229d85=enchant_tools[_0x51de9c][_0x4532b7(0x10f)],_0xe5e89e=new ModalFormData();_0xe5e89e[_0x4532b7(0x11b)](_0x4532b7(0x110));for(let _0x466c55 of _0x229d85){const _0x99513f=enchant_list[_0x466c55]['lvl'][_0x4532b7(0x13c)],_0x502b19=enchant_list[_0x466c55][_0x4532b7(0x123)][_0x4532b7(0x132)];_0xe5e89e[_0x4532b7(0x119)]('§8§l\x20\x20'+_0x99513f+'§6',0x0,_0x502b19,0x1);}_0xe5e89e[_0x4532b7(0x116)](_0x313ae3)['then'](_0x4f7fcf=>{const _0x3b0a03=_0x4532b7;if(_0x4f7fcf['canceled'])return;let _0x30ec21=0x0,_0x25c3c0={};_0x4f7fcf[_0x3b0a03(0xfc)][_0x3b0a03(0x115)]((_0x408405,_0x23aaf0)=>{_0x408405>0x0&&(_0x30ec21+=_0x408405,_0x25c3c0[_0x229d85[_0x23aaf0]]=_0x408405);});if(!checkCompatibility(_0x25c3c0)){_0x313ae3['sendMessage'](_0x3b0a03(0x12c));return;}_0x30ec21*=config['xp'];const _0x27bcde=see_xp(_0x313ae3);if(_0x27bcde<_0x30ec21){_0x313ae3[_0x3b0a03(0x11d)]('§f[§dEnchant\x20+§f]\x20§8>>\x20§cYou\x20don\x27t\x20have\x20enough\x20XP.\x20You\x20need\x20'+(_0x30ec21-_0x27bcde)+_0x3b0a03(0x10e));return;}const _0x2e9f0c=new ActionFormData();_0x2e9f0c[_0x3b0a03(0x11b)](_0x3b0a03(0x13b));let _0x22daf8=_0x3b0a03(0x12b);for(let _0x283962 in _0x25c3c0){const _0x4e39e5=enchant_list[_0x283962][_0x3b0a03(0x123)][_0x3b0a03(0x13c)],_0x55b09f=toRoman(_0x25c3c0[_0x283962]);_0x22daf8+=_0x3b0a03(0x10d)+_0x4e39e5+'\x20'+_0x55b09f;}_0x22daf8+=_0x3b0a03(0x139)+_0x30ec21+_0x3b0a03(0x124),_0x2e9f0c[_0x3b0a03(0x131)](_0x22daf8),_0x2e9f0c['button']('§6If\x20you\x20are\x20sure\x20of\x20\x0ayour\x20choice,\x20click\x20here'),_0x2e9f0c[_0x3b0a03(0x10c)](_0x3b0a03(0x138)),_0x2e9f0c[_0x3b0a03(0x116)](_0x313ae3)['then'](({selection:_0x280f69,canceled:_0xe4d69c})=>{const _0x1aba60=_0x3b0a03;if(_0xe4d69c||_0x280f69!==0x0)return;_0x313ae3[_0x1aba60(0x133)](_0x1aba60(0x11a)+_0x30ec21+_0x1aba60(0x127)),_0x313ae3[_0x1aba60(0x11d)]('§f[§dEnchant\x20+§f]\x20§8>>\x20§aWeapons\x20to\x20upgrade!');var _0x47233=_0x57d5ae[_0x1aba60(0x102)](_0x1aba60(0x128));if(_0x47233){for(let _0x51ba55 in _0x25c3c0){_0x47233[_0x1aba60(0x11f)]({'type':new EnchantmentType(_0x51ba55),'level':_0x25c3c0[_0x51ba55]});}_0x583c33[_0x1aba60(0x130)](_0x4ab32d,_0x57d5ae);}})[_0x3b0a03(0x11e)](_0x3ec136=>{const _0x3322a6=_0x3b0a03;console[_0x3322a6(0x13a)](_0x3ec136,_0x3ec136[_0x3322a6(0xff)]);});})[_0x4532b7(0x11e)](_0xfe5a95=>{const _0x2294ec=_0x4532b7;console[_0x2294ec(0x13a)](_0xfe5a95,_0xfe5a95[_0x2294ec(0xff)]);});}function _0x2e67(){const _0x56e001=['log','5830420jAMSvR','forEach','show','§fSlot:\x20§a','getEntitiesAtBlockLocation','slider','xp\x20-','title','dimension','sendMessage','catch','addEnchantment','split','da:enchant_table_plus','1737211DlvMnY','lvl','\x20\x0a§f---------------------\x0a\x0a§6Rules:\x0a§fremember\x20that\x20enchants\x20\x0ayou\x20are\x20entering\x20cannot\x20\x0abe\x20overwritten,\x20but\x20are\x20added.','155403uEOROd','48272yzqaWx','L\x20@s','minecraft:enchantable','floor','1974134BPGjfX','§aEnchant\x20to\x20add:\x0a§f---------------------','§f[§dEnchant\x20+§f]\x20§8>>\x20§cYou\x20have\x20selected\x20incompatible\x20spells.\x20Try\x20again.','getItem','3eRLbfa','minecraft:inventory','setItem','body','max','runCommandAsync','includes','length','spawnEntity','47319206TnxbbC','§cIf\x20you\x20have\x20second\x20\x0athoughts\x20click\x20here','\x0a§f---------------------\x0a§aTotal\x20XP\x20cost:\x20§6','error','arucube.enchant.confirm','name','6aNyQOa','320XZPzkm','formValues','index','403720CVMBLX','stack','typeId','nameTag','getComponent','inventory','location','728riwQNT','da:enchant_book','keys','container','push','find','then','button','\x0a§d-\x20','\x20More\x20XP.','value','arucube.enchant.add','§f[§dEnchant\x20+§f]\x20§8>>\x20§cNot\x20weapons\x20to\x20upgrade!','§fList\x20of\x20Enchantable\x20Items:§a\x20'];_0x2e67=function(){return _0x56e001;};return _0x2e67();};