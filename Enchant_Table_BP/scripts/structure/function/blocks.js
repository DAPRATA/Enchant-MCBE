const AruCube_0x4d7eeb=AruCube_0x2306;(function(_0x378fc5,_0x43cb95){const _0x1eb577=AruCube_0x2306,_0x5b78d3=_0x378fc5();while(!![]){try{const _0x41ea06=parseInt(_0x1eb577(0x7f))/0x1+-parseInt(_0x1eb577(0xa9))/0x2+-parseInt(_0x1eb577(0xa8))/0x3*(parseInt(_0x1eb577(0x8c))/0x4)+parseInt(_0x1eb577(0xae))/0x5+-parseInt(_0x1eb577(0x9e))/0x6+-parseInt(_0x1eb577(0xb1))/0x7+parseInt(_0x1eb577(0x81))/0x8;if(_0x41ea06===_0x43cb95)break;else _0x5b78d3['push'](_0x5b78d3['shift']());}catch(_0x2b9b48){_0x5b78d3['push'](_0x5b78d3['shift']());}}}(AruCube_0x1e61,0xa19f2));import{Vector}from'@minecraft/server';import{ActionFormData,ModalFormData}from'@minecraft/server-ui';import{getTexturePath,formatItemName,see_xp,checkCompatibility}from'./function';function AruCube_0x1e61(){const _0xe255c4=['6810545qmPbgk','sendMessage','da:enchant_book','lvl','push','arucube.enchant.plus','arucube.enchant.add','forEach','level','xp\x20-','Inventory\x20for\x20player\x20not\x20found.','§6If\x20you\x20are\x20sure\x20of\x20\x0ayour\x20choice,\x20click\x20here','keys','\x0a§8','show','title','495097vUNmrq','addEnchantment','18897920UGagrf','index','L\x20@s','minecraft:inventory','then','canceled','length','error','find','dimension','\x0a§f---------------------\x0a§aTotal\x20XP\x20cost:\x20§6','20dcmydp','\x20More\x20XP.','log','runCommandAsync','typeId','slider','name','§f[§dEnchant\x20+§f]\x20§8>>\x20§aWeapons\x20to\x20upgrade!','enchantToolKey','spawnEntity','body','stack','repeat','split','nameTag','da:enchant_table_plus','catch','button','5059218QRmiYl','\x0a§d-\x20','formValues','location','§8§l\x20\x20','getEntitiesAtBlockLocation','minecraft:enchantable','\x20\x0a§f---------------------\x0a\x0a§6Rules:\x0a§fremember\x20that\x20enchants\x20\x0ayou\x20are\x20entering\x20cannot\x20\x0abe\x20overwritten,\x20but\x20are\x20added.','setItem','§aEnchant\x20to\x20add:\x0a§f---------------------','709269JAzzIq','954248APpjuX','includes','getItem','floor','getComponent','6400210KnGUit','§f[§dEnchant\x20+§f]\x20§8>>\x20§cYou\x20have\x20selected\x20incompatible\x20spells.\x20Try\x20again.','arucube.enchant.confirm'];AruCube_0x1e61=function(){return _0xe255c4;};return AruCube_0x1e61();}import{enchant_tools,enchant_list,enchant_type}from'./enchant';import{config}from'../../config';function AruCube_0x2306(_0x1f0549,_0x2e6aa3){const _0x1e614f=AruCube_0x1e61();return AruCube_0x2306=function(_0x23069b,_0x1b8ea7){_0x23069b=_0x23069b-0x76;let _0x559b4a=_0x1e614f[_0x23069b];return _0x559b4a;},AruCube_0x2306(_0x1f0549,_0x2e6aa3);}export const blocks={0x1:{'Id':AruCube_0x4d7eeb(0x9b),'interact_function':enchant_table_plus_interact,'place_function':enchant_table_plus_place,'break_function':enchant_table_plus_break}};async function enchant_table_plus_place(_0x3cc844,_0x1ec2d7){const _0x15b505=AruCube_0x4d7eeb;let _0x6a48f4=_0x3cc844[_0x15b505(0x8a)][_0x15b505(0x95)](_0x15b505(0xb3),new Vector(_0x1ec2d7['location']['x']+0.5,_0x1ec2d7['location']['y']+0x1,_0x1ec2d7[_0x15b505(0xa1)]['z']+0.5));_0x6a48f4[_0x15b505(0x9a)]='';};async function enchant_table_plus_break(_0x3b4bcb,_0xa1d293){const _0x21e300=AruCube_0x4d7eeb,_0x54e738=new Vector(_0xa1d293['location']['x']+0.5,_0xa1d293['location']['y']+0x1,_0xa1d293[_0x21e300(0xa1)]['z']+0.5),_0x199e51=_0xa1d293['dimension'][_0x21e300(0xa3)](_0x54e738),_0x268678=_0x199e51[_0x21e300(0x89)](_0x20c0ee=>{const _0x1da44c=_0x21e300;return _0x20c0ee[_0x1da44c(0x90)]===_0x1da44c(0xb3);});_0x268678&&_0x268678[_0x21e300(0x8f)]('kill\x20@s');};async function enchant_table_plus_interact(_0x38335b){const _0x242c53=AruCube_0x4d7eeb,_0xc282a7=_0x38335b[_0x242c53(0xad)]('inventory')['container'];if(!_0xc282a7){console[_0x242c53(0x8e)](_0x242c53(0x79));return;}const _0x4b3522=[];for(let _0x1e4dba=0x0;_0x1e4dba<0x9;_0x1e4dba++){const _0x12c230=_0xc282a7['getItem'](_0x1e4dba);if(!_0x12c230)continue;const _0x1384f5=_0x12c230[_0x242c53(0x90)][_0x242c53(0x99)](':')[0x1];let _0x5c319d=Object[_0x242c53(0x7b)](enchant_tools)[_0x242c53(0x89)](_0x1b1e55=>_0x1384f5===_0x1b1e55);!_0x5c319d&&(_0x5c319d=Object[_0x242c53(0x7b)](enchant_tools)[_0x242c53(0x89)](_0x2747e8=>_0x1384f5[_0x242c53(0xaa)](_0x2747e8)));if(!_0x5c319d)continue;_0x4b3522[_0x242c53(0xb5)]({'item':_0x12c230,'index':_0x1e4dba,'enchantToolKey':_0x5c319d});}for(let _0x646fab=0x9;_0x646fab<0x24;_0x646fab++){const _0x507f39=_0xc282a7[_0x242c53(0xab)](_0x646fab);if(!_0x507f39)continue;const _0x36f59a=_0x507f39[_0x242c53(0x90)]['split'](':')[0x1];let _0x5cb57a=Object[_0x242c53(0x7b)](enchant_tools)[_0x242c53(0x89)](_0x3232d9=>_0x36f59a===_0x3232d9);!_0x5cb57a&&(_0x5cb57a=Object[_0x242c53(0x7b)](enchant_tools)[_0x242c53(0x89)](_0x1292a2=>_0x36f59a[_0x242c53(0xaa)](_0x1292a2)));if(!_0x5cb57a)continue;_0x4b3522[_0x242c53(0xb5)]({'item':_0x507f39,'index':_0x646fab,'enchantToolKey':_0x5cb57a});}if(_0x4b3522['length']===0x0){_0x38335b[_0x242c53(0xb2)]('§f[§dEnchant\x20+§f]\x20§8>>\x20§cNot\x20weapons\x20to\x20upgrade!');return;}const _0x2e22ae=new ActionFormData();_0x2e22ae[_0x242c53(0x7e)](_0x242c53(0xb6)),_0x2e22ae[_0x242c53(0x96)]('§fList\x20of\x20Enchantable\x20Items:§a\x20'+_0x4b3522['length']+_0x242c53(0x7c));for(let _0x3248a8=0x0;_0x3248a8<_0x4b3522[_0x242c53(0x87)];_0x3248a8++){const {item:_0x5cb08b,index:_0x1b1f61,enchantToolKey:_0x5287ed}=_0x4b3522[_0x3248a8],_0x5a2096=formatItemName(_0x5cb08b[_0x242c53(0x9a)]??_0x5cb08b['typeId']),_0x465be0=getTexturePath(_0x5cb08b[_0x242c53(0x90)]),_0x3ecc9f=enchant_type[_0x5287ed]||_0x5287ed;_0x2e22ae['button']('§fSlot:\x20§a'+_0x1b1f61,_0x465be0);}_0x2e22ae[_0x242c53(0x7d)](_0x38335b)[_0x242c53(0x85)](({selection:_0x2befe6,canceled:_0xb84ffe})=>{const _0x4bce5c=_0x242c53;if(_0xb84ffe)return;const _0x3ac704=_0x4b3522[_0x2befe6];if(!_0x3ac704)return;showItemEditor(_0x38335b,_0x3ac704[_0x4bce5c(0x82)],_0x3ac704[_0x4bce5c(0x94)]);});};function toRoman(_0x36a6c2){const _0x299370=AruCube_0x4d7eeb,_0x8c1f9c={'M':0x3e8,'CM':0x384,'D':0x1f4,'CD':0x190,'C':0x64,'XC':0x5a,'L':0x32,'XL':0x28,'X':0xa,'IX':0x9,'V':0x5,'IV':0x4,'I':0x1};let _0x6e71a9='';for(let _0x39c55d of Object[_0x299370(0x7b)](_0x8c1f9c)){let _0x4bcba9=Math[_0x299370(0xac)](_0x36a6c2/_0x8c1f9c[_0x39c55d]);_0x36a6c2-=_0x4bcba9*_0x8c1f9c[_0x39c55d],_0x6e71a9+=_0x39c55d[_0x299370(0x98)](_0x4bcba9);}return _0x6e71a9;};async function showItemEditor(_0x278301,_0x36c0cb,_0x1dec06){const _0x24aeb7=AruCube_0x4d7eeb,{container:_0xffaef4}=_0x278301[_0x24aeb7(0xad)](_0x24aeb7(0x84)),_0x575537=_0xffaef4[_0x24aeb7(0xab)](_0x36c0cb),_0x56a724=enchant_tools[_0x1dec06]['value'],_0x2357b0=new ModalFormData();_0x2357b0[_0x24aeb7(0x7e)](_0x24aeb7(0xb7));for(let _0x2d9a13 of _0x56a724){const _0x1e498f=enchant_list[_0x2d9a13][_0x24aeb7(0xb4)][_0x24aeb7(0x92)],_0x51fe8c=enchant_list[_0x2d9a13][_0x24aeb7(0xb4)]['max'];_0x2357b0[_0x24aeb7(0x91)](_0x24aeb7(0xa2)+_0x1e498f+'§6',0x0,_0x51fe8c,0x1);}_0x2357b0[_0x24aeb7(0x7d)](_0x278301)[_0x24aeb7(0x85)](_0x5a8ce4=>{const _0x5bbad7=_0x24aeb7;if(_0x5a8ce4[_0x5bbad7(0x86)])return;let _0x2278be=0x0,_0x4afe6a=[];_0x5a8ce4[_0x5bbad7(0xa0)][_0x5bbad7(0x76)]((_0x2a1104,_0x5b3213)=>{const _0x4e3c5b=_0x5bbad7;_0x2a1104>0x0&&(_0x2278be+=_0x2a1104,_0x4afe6a[_0x4e3c5b(0xb5)]({'id':_0x56a724[_0x5b3213],'level':_0x2a1104}));});if(!checkCompatibility(_0x4afe6a)){_0x278301['sendMessage'](_0x5bbad7(0xaf));return;}_0x2278be*=config['xp'];const _0x4da05f=see_xp(_0x278301);if(_0x4da05f<_0x2278be){_0x278301[_0x5bbad7(0xb2)]('§f[§dEnchant\x20+§f]\x20§8>>\x20§cYou\x20don\x27t\x20have\x20enough\x20XP.\x20You\x20need\x20'+(_0x2278be-_0x4da05f)+_0x5bbad7(0x8d));return;}const _0xf62e9a=new ActionFormData();_0xf62e9a[_0x5bbad7(0x7e)](_0x5bbad7(0xb0));let _0xd2d738=_0x5bbad7(0xa7);_0x4afe6a[_0x5bbad7(0x76)](_0x499664=>{const _0x3df501=_0x5bbad7,_0x1516be=enchant_list[_0x499664['id']][_0x3df501(0xb4)]['name'],_0x1b8592=toRoman(_0x499664['level']);_0xd2d738+=_0x3df501(0x9f)+_0x1516be+'\x20'+_0x1b8592;}),_0xd2d738+=_0x5bbad7(0x8b)+_0x2278be+_0x5bbad7(0xa5),_0xf62e9a[_0x5bbad7(0x96)](_0xd2d738),_0xf62e9a['button'](_0x5bbad7(0x7a)),_0xf62e9a[_0x5bbad7(0x9d)]('§cIf\x20you\x20have\x20second\x20\x0athoughts\x20click\x20here'),_0xf62e9a[_0x5bbad7(0x7d)](_0x278301)[_0x5bbad7(0x85)](({selection:_0x5140b1,canceled:_0x434012})=>{const _0x24d3e0=_0x5bbad7;if(_0x434012||_0x5140b1!==0x0)return;_0x278301[_0x24d3e0(0x8f)](_0x24d3e0(0x78)+_0x2278be+_0x24d3e0(0x83)),_0x278301['sendMessage'](_0x24d3e0(0x93));var _0x58ebc9=_0x575537[_0x24d3e0(0xad)](_0x24d3e0(0xa4));_0x58ebc9&&(_0x4afe6a[_0x24d3e0(0x76)](_0x58b351=>{const _0x296944=_0x24d3e0;_0x58ebc9[_0x296944(0x80)]({'type':_0x58b351['id'],'level':_0x58b351[_0x296944(0x77)]});}),_0xffaef4[_0x24d3e0(0xa6)](_0x36c0cb,_0x575537));})[_0x5bbad7(0x9c)](_0x299dc5=>{const _0x244871=_0x5bbad7;console[_0x244871(0x88)](_0x299dc5,_0x299dc5[_0x244871(0x97)]);});})[_0x24aeb7(0x9c)](_0x481532=>{const _0x30a58b=_0x24aeb7;console['error'](_0x481532,_0x481532[_0x30a58b(0x97)]);});};